(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/userInfor/modifyUser/modifyUser"],{460:function(e,n,t){"use strict";(function(e){var n=t(3);t(25),t(26);n(t(24));var o=n(t(461));wx.__webpack_require_UNI_MP_PLUGIN__=t,e(o.default)}).call(this,t(1)["createPage"])},461:function(e,n,t){"use strict";t.r(n);var o=t(462),i=t(464);for(var r in i)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(r);t(466);var s,a=t(40),c=Object(a["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],s);c.options.__file="pages/userInfor/modifyUser/modifyUser.vue",n["default"]=c.exports},462:function(e,n,t){"use strict";t.r(n);var o=t(463);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},463:function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return i})),t.d(n,"staticRenderFns",(function(){return s})),t.d(n,"recyclableRender",(function(){return r})),t.d(n,"components",(function(){return o}));var i=function(){var e=this,n=e.$createElement;e._self._c},r=!1,s=[];i._withStripped=!0},464:function(e,n,t){"use strict";t.r(n);var o=t(465),i=t.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=i.a},465:function(e,n,t){"use strict";(function(e){var o=t(3);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=t(185),r=o(t(186)),s=t(275),a=(t(277),{data:function(){return{userName:"",modifyFlag:1,codeCheck:!1,passwordCheck:!0,newModifyFlag:!1,infor:"",markPhone:!1,markCode:!1,markName:"",newPhone:"",code:"",iscode:""}},onLoad:function(e){this.modifyFlag=e.modifyFlag,this.infor=e.infor,console.log(e.infor)},onShow:function(){},methods:{inputName:function(e){this.userName=e.detail.value,""==e.detail.value&&0==e.detail.value.length?this.markName=!1:this.markName=!0},conformName:function(){var n="uName",t=this.userName,o="用户名修改成功";""!=this.userName?this.updateUser(n,t,o):e.showToast({title:"请输入用户名",icon:"none",duration:1e3})},codeInput:function(e){var n=e.detail.value;""!=n?(this.code=n,this.markCode=!0):this.markCode=!1},sendCode:async function(e){console.log("xxxxxx",e),this.timer()},applyCode:function(){var n=this,t={uEnvirn:"MP-WEIXIN",openId:e.getStorageSync("openid"),FLAG:"applyCode"};console.log("======",t),r.default.post(i.userServlet,t).then((async function(t){console.log("==验证码===",t);var o=t.split(",")[0],i=t.split(",")[1],r=t.split(",")[2];console.log("==status==",o),console.log("==code==",i),console.log("==message==",r),"200"==o?(n.iscode=i,await n.sendCode(i),e.showToast({title:r,icon:"none",duration:2e3})):"201"==o||"202"==o||"203"==o?e.showToast({title:r,icon:"none",duration:2e3}):e.showToast({title:"系统异常",icon:"none",duration:2e3})})).catch((function(n){e.showToast({title:"系统异常",icon:"none",duration:1e3})}))},getCode:async function(){var n=this,t=/^(14[0-9]|13[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$$/,o=this.infor;""==o?e.showToast({title:"手机号不能为空",icon:"none",duration:1e3}):t.test(o)?await n.applyCode():e.showToast({title:"请输入正确的手机号",icon:"none",duration:1e3})},timer:function(){if(this.c2&&this.c2.interval)return!1;this.c2=new s.$wuxCountDown({date:+new Date+1e4,onEnd:function(){this.setData({c2:"重新发送"})},render:function(e){var n=this.leadingZeros(e.sec,2)+" 秒 ";0!==e.sec&&this.setData({c2:n})}})},check:function(){var n=/^(14[0-9]|13[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$$/;return""==this.phone?(e.showToast({title:"手机号不能为空",icon:"none",duration:2e3}),!1):n.test(this.phone)?""==this.password&&1==this.loginMode?(e.showToast({title:"密码不能为空",icon:"none",duration:2e3}),!1):""!=this.code||2!=this.loginMode||(e.showToast({title:"验证码不能为空",icon:"none",duration:2e3}),!1):(e.showToast({title:"请输入正确的手机号",icon:"none",duration:1e3}),!1)},conformCode:function(){var n=this,t={uEnvirn:"MP-WEIXIN",openId:e.getStorageSync("openid"),code:this.code,FLAG:"validateCode"};console.log("===rrr===",t),r.default.post(i.userServlet,t).then((function(t){console.log("===res===",t);var o=t.split("*")[0],i=t.split("*")[1];console.log("==status==",o),console.log("==message==",i),"200"==o?(n.newModifyFlag=!0,e.showToast({title:i,icon:"none",dubration:2e3})):(n.newModifyFlag=!1,e.showToast({title:i,icon:"none",duration:2e3}))})).catch((function(e){}))},newPhoneInput:function(e){var n=e.detail.value;""!=n?(this.newPhone=n,this.markPhone=!0):this.markPhone=!1},conformPhone:function(){var n="uPhone",t=this.newPhone,o="手机号修改成功";this.updateUser(n,t,o),e.redirectTo({url:"../userInfor?u_Phone="+this.newPhone})},checkPwd:function(n){n==this.infor||e.showToast({title:"旧密码输入错误,请重新输入",duration:2e3})},oldPwdChange:function(e){this.oldPwd=e.detail.value},newPwdChange:function(e){this.checkPwd(this.oldPwd),this.newPwd=e.detail.value},conformPwdChange:function(e){this.conformPwd=e.detail.value,""!=e.detail.value?this.passwordCheck=!0:this.passwordCheck=!1},checkPwds:function(e,n){return e==n},conformPwds:function(){var n="uPassword",t=this.newPwd,o="密码修改成功";this.checkPwds(this.newPwd,this.conformPwd)?this.updateUser(n,t,o):e.showToast({title:"两次密码输入不一致，请重新输入",duration:2e3})},updateUser:function(n,t,o){var s=this,a={openId:e.getStorageSync("openid"),inforType:n,inforMation:t,FLAG:"U"};r.default.post(i.userServlet,a).then((function(n){e.showToast({title:o,duration:2e3}),s.queryUsreInfo()})).catch((function(e){console.log(e)}))},queryUsreInfo:function(){var n="MP-WEIXIN";console.log(e.getStorageSync("openid"));var t={openId:e.getStorageSync("openid"),uEnvirn:n,FLAG:"R"};r.default.post(i.userServlet,t).then((function(n){e.removeStorageSync("WeChatUserInfo"),e.setStorageSync("WeChatUserInfo",n),e.navigateBack({delta:1})})).catch((function(e){}))}}});n.default=a}).call(this,t(1)["default"])},466:function(e,n,t){"use strict";t.r(n);var o=t(467),i=t.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=i.a},467:function(e,n,t){}},[[460,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/userInfor/modifyUser/modifyUser.js.map