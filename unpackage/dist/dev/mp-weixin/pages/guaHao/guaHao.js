(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/guaHao/guaHao"],{309:function(e,t,n){"use strict";(function(e){var t=n(3);n(25),n(26);t(n(24));var o=t(n(310));wx.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n(1)["createPage"])},310:function(e,t,n){"use strict";n.r(t);var o=n(311),a=n(313);for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n(315);var u,c=n(40),i=Object(c["default"])(a["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],u);i.options.__file="pages/guaHao/guaHao.vue",t["default"]=i.exports},311:function(e,t,n){"use strict";n.r(t);var o=n(312);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},312:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return a})),n.d(t,"staticRenderFns",(function(){return u})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return o}));var a=function(){var e=this,t=e.$createElement;e._self._c},r=!1,u=[];a._withStripped=!0},313:function(e,t,n){"use strict";n.r(t);var o=n(314),a=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=a.a},314:function(e,t,n){"use strict";(function(e){var o=n(3);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(185),r=o(n(186)),u=function(){Promise.all([n.e("common/vendor"),n.e("components/uni-countDown/uni-countDown")]).then(function(){return resolve(n(583))}.bind(null,n)).catch(n.oe)},c={components:{countDown:u},data:function(){return{guaHao:[]}},onShow:function(){console.log("show is called"),""==e.getStorageSync("LoginIndex")&&e.redirectTo({url:"../login/login"}),this.getGuaHao()},methods:{getGuaHao:function(){var t=this,n={FLAG:"R",openId:e.getStorageSync("openid")};r.default.post(a.GuaHaoServlet,n).then((function(n){console.log("显示挂号信息",n);var o=[];if("000000"==n[n.length-1].SYS_HEAD.ReturnCode){for(var a=0;a<n.length-1;a++)o.push(n[a]);t.guaHao=o}else e.showToast({title:n[n.length-1].SYS_HEAD.ReturnMessage,icon:"none",duration:2e3})})).catch((function(e){console.log(e)}))},PayGuaHao:function(t){if(""!=this.countdownStr){var n=this,o=t.currentTarget.dataset.pdid,u=t.currentTarget.dataset.pgid,c=t.currentTarget.dataset.pgtime,i=parseInt(this.convertWeek(t.currentTarget.dataset.pgweek.trim().split(" ")[3])),s={FLAG:"U",payFlag:"UA",dId:o,period:c,dayOfWeek:i,gId:u,gPayStatus:"1"};console.log("支付提交数据",s),e.showModal({title:"你确定要支付本次挂号预约？",content:t.currentTarget.dataset.pgweek,success:function(t){t.confirm?r.default.post(a.GuaHaoServlet,s).then((function(t){(t[0].SYS_HEAD.ReturnCode="000000")?(e.showToast({title:t[0].SYS_HEAD.ReturnMessage,icon:"none",duration:2e3}),n.getGuaHao(),clearInterval(getApp().globalData.timer)):e.showToast({title:t[0].SYS_HEAD.ReturnMessage,icon:"none",duration:2e3})})).catch((function(t){e.showToast({title:t,icon:"none",duration:2e3})})):e.showToast({title:"取消支付",icon:"success",duration:2e3})}})}else this.showPrompt()},convertWeek:function(e){return e="周日"==e?"7":"周一"==e?"1":"周二"==e?"2":"周三"==e?"3":"周四"==e?"4":"周五"==e?"5":"6",e},cancelGuaHao:function(t){console.log("=eeeee====",t.currentTarget.dataset);var n=this,o=t.currentTarget.dataset.did,u=t.currentTarget.dataset.gid,c=t.currentTarget.dataset.gtime,i=parseInt(this.convertWeek(t.currentTarget.dataset.gweek.trim().split(" ")[3])),s={FLAG:"U",payFlag:"UC",dId:o,period:c,dayOfWeek:i,gPayStatus:"3",gId:u};console.log("====duysdgsyg====",s),e.showModal({title:"你确定要取消本次预约？",content:t.currentTarget.dataset.gweek,success:function(t){t.confirm?r.default.post(a.GuaHaoServlet,s).then((function(t){(t[0].SYS_HEAD.ReturnCode="000000")?(e.showToast({title:t[0].SYS_HEAD.ReturnMessage,icon:"none",duration:2e3}),clearInterval(getApp().globalData.timer),n.getGuaHao()):(n.guaHao=[],e.showToast({title:t[0].SYS_HEAD.ReturnMessage,icon:"none",duration:2e3}))})).catch((function(t){e.showToast({title:"取消失败",icon:"success",duration:2e3})})):t.cancel&&e.showToast({title:"取消操作",icon:"success",duration:2e3})}})},guaHaoDetail:function(t){e.navigateTo({url:"../guaHaoDetail/guaHaoDetail?gid="+t.currentTarget.dataset.gid+"&gorder="+t.currentTarget.dataset.gorder})},DeleteGuaHao:function(t){var n=this;console.log("=eeeee====",t.currentTarget.dataset);var o=t.currentTarget.dataset.dgid,u={FLAG:"D",gId:o};console.log("====删除订单====",u),e.showModal({title:"你确定要删除该订单",success:function(t){t.confirm?r.default.post(a.GuaHaoServlet,u).then((function(t){(t[0].SYS_HEAD.ReturnCode="000000")?(e.showToast({title:t[0].SYS_HEAD.ReturnMessage,icon:"none",duration:2e3}),n.getGuaHao()):(n.guaHao=[],e.showToast({title:t[0].SYS_HEAD.ReturnMessage,icon:"none",duration:2e3}))})).catch((function(t){console.log(t),e.showToast({title:"取消失败",icon:"success",duration:2e3})})):t.cancel&&e.showToast({title:"取消操作",icon:"success",duration:2e3})}})}}};t.default=c}).call(this,n(1)["default"])},315:function(e,t,n){"use strict";n.r(t);var o=n(316),a=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=a.a},316:function(e,t,n){}},[[309,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/guaHao/guaHao.js.map