{"version":3,"sources":["webpack:////Users/software/uni-app/个人项目/PalmtopHospitalFontEnd/components/uni-countDown/uni-countDown.vue?70e8","webpack:////Users/software/uni-app/个人项目/PalmtopHospitalFontEnd/components/uni-countDown/uni-countDown.vue?bf7d","webpack:////Users/software/uni-app/个人项目/PalmtopHospitalFontEnd/components/uni-countDown/uni-countDown.vue?41b6","webpack:////Users/software/uni-app/个人项目/PalmtopHospitalFontEnd/components/uni-countDown/uni-countDown.vue?9df9","uni-app:///components/uni-countDown/uni-countDown.vue"],"names":["renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","data","countdownStr","props","orderEndTime","type","default","gId","payStatus","gTime","gWeek","dId","watch","mounted","methods","showPrompt","uni","title","content","showCancel","cancelText","confirmText","console","convertWeek","gweek","updatePayStatus","FLAG","payFlag","period","dayOfWeek","gPayStatus","api","icon","duration","countdowm","getApp","self","clearInterval","scend","minute","str"],"mappings":"uIAAA,6HACIA,EADJ,QAQIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,6CACZ,aAAAF,E,0CCtBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G,iCCRvB,yHAA21B,eAAG,G,0ICO91B,SACA,YACA,S,EAGA,CACAC,gBACA,OACAC,kBAIAC,OACAC,cACAC,YACAC,YAEAC,KACAF,YACAC,YAEAE,WACAH,YACAC,YAEAG,OACAJ,YACAC,YAEAI,OACAL,YACAC,YAEAK,KACAN,YACAC,aAGAM,OACAR,wBACA,2DAEAI,qBACA,4DAGAK,mBACA,2DAEAC,SACAC,sBAAA,MAEAC,gBACAC,eACAC,qBACAC,cAEAC,gBACAC,mBAAA,6BACA,kCACA,yCACA,sCACA,YAEA,WACA,cAIAC,yBAEA,KAGAC,wBAgBA,OAdAC,EADA,QACAA,IACA,QACAA,IACA,QACAA,IACA,QACAA,IACA,QACAA,IACA,QACAA,IAEAA,IAEA,GAEAC,4BACA,IACA,WACA,aACA,8DACA,GACAC,SACAC,aACAhB,MACAiB,SACAC,YACAtB,MACAuB,gBAEAC,qDACA,oCAGAf,aACAC,kCACAe,YACAC,kBAGA,mBAEAjB,aACAC,QACAe,YACAC,mBAIAC,0BACA,WACAC,kDACA,oCACA,WACA,gBAGA,8BAEA,GADAb,8BACA,KAYA,OAXAA,oCACA,SACAc,eACAA,sBAGAA,kCACAC,yCAMA,IAEA,qBAEA,wBAEA,2BACA,OACAC,SAEA,OACAC,SAEA,cACA,MACAC,WAEAJ,8BAGA,QAGA,c","file":"components/uni-countDown/uni-countDown.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./uni-countDown.vue?vue&type=template&id=c00b3fa4&\"\nvar renderjs\nimport script from \"./uni-countDown.vue?vue&type=script&lang=js&\"\nexport * from \"./uni-countDown.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/uni-countDown/uni-countDown.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uni-countDown.vue?vue&type=template&id=c00b3fa4&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uni-countDown.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./uni-countDown.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\n\t\t<text>{{countdownStr}}</text>\r\n\t</view>\r\n</template>\r\n\r\n<script>\nimport {GuaHaoServlet} from '../../pages/common/api.js'\n\timport api from '../../pages/common/request.js'\n\timport {\n\t\treload\n\t} from '../../pages/common/utils.js'\r\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tcountdownStr: \"\",\n\t\t\t\t// payStatusX:''\n\t\t\t}\n\t\t},\r\n\t\tprops: { //接收父组件的数据\r\n\t\t\torderEndTime: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: ''\r\n\t\t\t},\n\t\t\tgId:{\n\t\t\t\ttype:String,\n\t\t\t\tdefault:''\n\t\t\t},\n\t\t\tpayStatus:{\n\t\t\t\ttype:String,\n\t\t\t\tdefault:''\n\t\t\t},\n\t\t\tgTime:{\n\t\t\t\ttype:String,\n\t\t\t\tdefault:''\n\t\t\t},\n\t\t\tgWeek:{\n\t\t\t\ttype:String,\n\t\t\t\tdefault:''\n\t\t\t},\n\t\t\tdId:{\n\t\t\t\ttype:String,\n\t\t\t\tdefault:''\n\t\t\t}\r\n\t\t},\r\n\t\twatch: { //监听时间的变化\r\n\t\t\torderEndTime() {\r\n\t\t\t\tthis.countdowm(this.orderEndTime,this.gId,this.payStatus)\r\n\t\t\t},\n\t\t\tpayStatus() {\n\t\t\t\tthis.countdowm(this.orderEndTime,this.gId,this.payStatus)\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\n\t\t\tthis.countdowm(this.orderEndTime,this.gId,this.payStatus)\r\n\t\t},\r\n\t\tmethods: {\n\t\t\tshowPrompt() {\n\t\t\t\tlet self = this\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle:\"订单支付超时\",\n\t\t\t\t\tcontent: '支付超时，请重新下单',\n\t\t\t\t\tshowCancel: false,\n\t\t\t\t\t// confirmText: \"重新下单\",\n\t\t\t\t\tcancelText: \"取消\", // 取消按钮的文字  \n\t\t\t\t\tconfirmText: \"确认\", // 确认按钮的文字  \n\t\t\t\t\tshowCancel: true, // 是否显示取消按钮，默认为 true\n\t\t\t\t\tconfirmColor: '#f55850',\n\t\t\t\t\tcancelColor: '#39B54A',\n\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t// console.log(\"====res===\",res);\n\t\t\t\t\t\tif (res.confirm) {\n\t\t\t\t\t\t\treload()\n\t\t\t\t\t\t\t// self.$emit(\"updatePay\")\n\t\t\t\t\t\t\t// console.log('confirm',self.countdownStr) //点击取消之后执行的代码 \n\t\t\t\t\t\t} else {  \n\t\t\t\t\t\t\tconsole.log('cancel') //点击取消之后执行的代码 \n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tconvertWeek: function(gweek) {\n\t\t\t\tif (gweek == \"周日\") {\n\t\t\t\t\tgweek = '7'\n\t\t\t\t} else if (gweek == \"周一\") {\n\t\t\t\t\tgweek = '1'\n\t\t\t\t} else if (gweek == \"周二\") {\n\t\t\t\t\tgweek = '2'\n\t\t\t\t} else if (gweek == \"周三\") {\n\t\t\t\t\tgweek = '3'\n\t\t\t\t} else if (gweek == \"周四\") {\n\t\t\t\t\tgweek = '4'\n\t\t\t\t} else if (gweek == \"周五\") {\n\t\t\t\t\tgweek = '5'\n\t\t\t\t} else {\n\t\t\t\t\tgweek = '6'\n\t\t\t\t}\n\t\t\t\treturn gweek\n\t\t\t},\n\t\t\tupdatePayStatus(gId){\n\t\t\t\tvar that = this\n\t\t\t\tvar did = this.dId\n\t\t\t\tvar gtime = this.gTime\n\t\t\t\tvar gweek = parseInt(this.convertWeek((this.gWeek).trim().split(\" \")[3]))\n\t\t\t\tvar data = {\n\t\t\t\t\tFLAG: \"U\",\n\t\t\t\t\tpayFlag:'UB',\n\t\t\t\t\tdId: did,\n\t\t\t\t\tperiod: gtime,\n\t\t\t\t\tdayOfWeek: gweek,\n\t\t\t\t\tgId: gId,\n\t\t\t\t\tgPayStatus:'2',\n\t\t\t\t}\n\t\t\t\tapi.post(GuaHaoServlet, data).then(res => {\n\t\t\t\t\tif (res[0].SYS_HEAD.ReturnCode = '000000') {\n\t\t\t\n\t\t\t\t\t} else {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: res[0].SYS_HEAD.ReturnMessage,\n\t\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\t//失败时回调函数\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: err,\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\tduration: 2000\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t},\r\n\t\t\tcountdowm(orderEndTime,gId,payStatus) {\n\t\t\t\tlet self = this;\r\n\t\t\t\tgetApp().globalData.timer = setInterval(function() {\r\n\t\t\t\t\tvar go_time = new Date((orderEndTime).replace(/-/g, '/'));\r\n\t\t\t\t\tvar now_time = new Date();\r\n\t\t\t\t\tif (!go_time.getTime()) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar alltime = go_time.getTime() - now_time.getTime(); //剩余的时间（毫秒\r\n\t\t\t\t\tconsole.log(\"==alltime===\", alltime);\r\n\t\t\t\t\tif (alltime <= 0) {\t\t\n\t\t\t\t\t\tconsole.log(\"=====预约失败时出发该状态=====\");\n\t\t\t\t\t\tif(payStatus=='0'){\n\t\t\t\t\t\t\tself.showPrompt()\n\t\t\t\t\t\t\tself.updatePayStatus(gId)\n\t\t\t\t\t\t\t// clearInterval(getApp().globalData.timer);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tself.countdownStr = \"支付超时,重新提交订单\"\n\t\t\t\t\t\tclearInterval(getApp().globalData.timer);\n\t\t\t\t\t\t// self.updatePayStatus(gId)\n\t\t\t\t\t\t// self.countdownStr = \"支付超时,重新提交订单\"\n\t\t\t\t\t\t// clearInterval(getApp().globalData.timer);\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar haoscend = alltime % 1000; //毫秒\r\n\t\t\t\t\t\t//console.log(haoscend);\r\n\t\t\t\t\t\tvar scend = parseInt((alltime / 1000) % 60)\r\n\t\t\t\t\t\t//console.log(scend);\r\n\t\t\t\t\t\tvar minute = parseInt((alltime / 1000 / 60) % 60)\r\n\t\t\t\t\t\t// console.log(minute);\r\n\t\t\t\t\t\tvar hour = parseInt((alltime / 1000 / 60 / 60) % 24)\r\n\t\t\t\t\t\tif (scend < 10) {\r\n\t\t\t\t\t\t\tscend = \"0\" + scend\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (minute < 10) {\r\n\t\t\t\t\t\t\tminute = \"0\" + minute\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet str = minute + \":\" + scend;\r\n\t\t\t\t\t\tif (hour > 0) {\r\n\t\t\t\t\t\t\tstr = hour + ':' + str\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tself.countdownStr = \"支付剩余时间:\"+str\n\t\t\t\t\t\t// console.log(str);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1000);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\n"],"sourceRoot":""}