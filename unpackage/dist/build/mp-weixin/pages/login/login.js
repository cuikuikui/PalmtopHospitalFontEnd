(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/login/login"],{"20f9":function(e,t,n){},"40cd3":function(e,t,n){"use strict";var o=n("20f9"),i=n.n(o);i.a},"923d":function(e,t,n){"use strict";n.r(t);var o=n("f9be"),i=n("9a7a");for(var a in i)"default"!==a&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("40cd3");var s,c=n("f0c5"),r=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);t["default"]=r.exports},"9a7a":function(e,t,n){"use strict";n.r(t);var o=n("cf4c"),i=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},bc19:function(e,t,n){"use strict";(function(e){n("d76e");o(n("66fd"));var t=o(n("923d"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},cf4c:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("dfa5"),i=n("f735"),a=s(n("8537"));function s(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n("604b");var r={data:function(){var e;return e={loginMode:1,usernameType:"text",codeBut:"获取验证码",loginImage:"../../static/images/logo.png",markPhone:!1,markCode:!1,phone:"",password:"",code:"",iscode:""},c(e,"markCode",!1),c(e,"seen",!1),c(e,"type_text","text"),c(e,"type_password","password"),e},onLoad:function(){},methods:{register:function(){e.navigateTo({url:"../register/register"})},GetCollectHospitalByOpenid:function(t){var n={openId:t};a.default.post(i.GetCollectHospitalByOpenid,n).then((function(t){e.setStorageSync("collectHospitals",t)})).catch((function(e){}))},GetCollectDoctorByOpenid:function(t){var n={openId:t};a.default.post(i.GetCollectDoctorByOpenid,n).then((function(t){e.setStorageSync("collectDoctors",t)})).catch((function(e){}))},loginCode:function(){this.loginMode=2,this.usernameType="number"},loginPhone:function(){this.loginMode=1,this.usernameType="text"},phoneInput:function(e){var t=e.detail.value;this.phone=t,""!=t&&t.length>=11?this.markPhone=!0:this.markPhone=!1},passwordInpur:function(e){this.password=e.detail.value,console.log(e.detail.value)},changeSeen:function(){this.seen=!this.seen},codeInput:function(e){var t=e.detail.value;this.code=t,""!=t&&t.length>=4?(this.code=t,this.markCode=!0):this.markCode=!1},getCode:function(t){var n=this,o=/^(14[0-9]|13[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$$/,i=this.phone;if(""==i)e.showToast({title:"手机号不能为空",icon:"none",duration:1e3});else if(o.test(i)){for(var a="",s=0;s<6;s++)a+=Math.floor(10*Math.random());this.isCode=a,console.log(this.isCode),n.timer()}else e.showToast({title:"请输入正确的手机号",icon:"none",duration:1e3})},timer:function(){if(this.c2&&this.c2.interval)return!1;this.c2=new o.$wuxCountDown({date:+new Date+1e4,onEnd:function(){this.setData({c2:"重新发送"})},render:function(e){var t=this.leadingZeros(e.sec,2)+" 秒 ";0!==e.sec&&this.setData({c2:t})}})},check:function(){var t=/^(14[0-9]|13[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$$/;return""==this.phone?(e.showToast({title:"手机号不能为空",icon:"none",duration:2e3}),!1):t.test(this.phone)?""==this.password&&1==this.loginMode?(e.showToast({title:"密码不能为空",icon:"none",duration:2e3}),!1):""!=this.code||2!=this.loginMode||(e.showToast({title:"验证码不能为空",icon:"none",duration:2e3}),!1):(e.showToast({title:"请输入正确的手机号",icon:"none",duration:1e3}),!1)},loginUp:function(){var t=this,n={uEnvirn:"MP-WEIXIN",openid:this.phone};this.check()&&a.default.post(i.WechatUserQuery,n).then((function(n){e.setStorageSync("LoginIndex",1),e.setStorageSync("WeChatUserInfo",n),e.setStorageSync("openid",t.phone),n.open_Id==t.phone&&n.u_Password==t.password?(e.showToast({title:"登录成功",icon:"none",duration:2e3}),setTimeout((function(){e.switchTab({url:"../index/index"})}),2e3)):e.showToast({title:"用户名或密码错误",icon:"none",duration:1e3})})).catch((function(t){e.showToast({title:"登录失败",icon:"none",duration:1e3})}))},login_weixin:function(){var t=this;e.login({success:function(n){e.request({url:"https://api.weixin.qq.com/sns/jscode2session?appid=wxc15c4fcf719eb5a3&secret=4ca91306643d90b167038c49bdb4d33f&js_code="+n.code+"&grant_type=authorization_code",data:{text:"uni.request"},header:{"custom-header":"hello"},success:function(n){e.setStorageSync("openid",n.data.openid),t.GetCollectHospitalByOpenid(n.data.openid),t.GetCollectDoctorByOpenid(n.data.openid),e.navigateTo({url:"../WechatLogin/WechatLogin"})}})}})}}};t.default=r}).call(this,n("543d")["default"])},f9be:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var i=function(){var e=this,t=e.$createElement;e._self._c},a=[]}},[["bc19","common/runtime","common/vendor"]]]);