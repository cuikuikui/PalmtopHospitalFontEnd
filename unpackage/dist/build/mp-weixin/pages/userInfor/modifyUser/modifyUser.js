(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/userInfor/modifyUser/modifyUser"],{"08e6":function(e,t,n){"use strict";(function(e){n("d76e");o(n("66fd"));var t=o(n("757b"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"2fa7":function(e,t,n){"use strict";var o=n("3d7d"),i=n.n(o);i.a},"3d7d":function(e,t,n){},"66bf":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n("f735"),i=a(n("8537")),r=n("dfa5");function a(e){return e&&e.__esModule?e:{default:e}}n("604b");var s={data:function(){return{userName:"",modifyFlag:1,codeCheck:!1,passwordCheck:!0,newModifyFlag:!1,infor:"",markPhone:!1,markCode:!1,markName:"",newPhone:"",code:"",iscode:""}},onLoad:function(e){this.modifyFlag=e.modifyFlag,this.infor=e.infor,console.log(e.infor)},onShow:function(){},methods:{inputName:function(e){this.userName=e.detail.value,""==e.detail.value&&0==e.detail.value.length?this.markName=!1:this.markName=!0},conformName:function(){var t="uName",n=this.userName,o="用户名修改成功";""!=this.userName?(this.updateUser(t,n,o),this.queryUsreInfo(),e.redirectTo({url:"../userInfor?u_Name="+this.userName})):e.showToast({title:"请输入用户名",icon:"none",duration:1e3})},codeInput:function(e){var t=e.detail.value;""!=t?(this.code=t,this.markCode=!0):this.markCode=!1},getCode:function(t){var n=this,o=/^(14[0-9]|13[0-9]|15[0-9]|17[0-9]|18[0-9])\d{8}$$/,i=this.infor;if(""==i)e.showToast({title:"手机号不能为空",icon:"none",duration:1e3});else if(o.test(i)){for(var r="",a=0;a<6;a++)r+=Math.floor(10*Math.random());this.isCode=r,console.log(this.isCode),n.timer()}else e.showToast({title:"请输入正确的手机号",icon:"none",duration:1e3})},timer:function(){if(this.c2&&this.c2.interval)return!1;this.c2=new r.$wuxCountDown({date:+new Date+1e4,onEnd:function(){this.setData({c2:"重新发送"})},render:function(e){var t=this.leadingZeros(e.sec,2)+" 秒 ";0!==e.sec&&this.setData({c2:t})}})},checkCode:function(){return this.code!=this.isCode?(e.showToast({title:"验证码输入错误",icon:"none",duration:2e3}),!1):(e.showToast({title:"验证成功",icon:"none",duration:2e3}),!0)},conformCode:function(){this.checkCode()?this.newModifyFlag=!0:this.newModifyFlag=!1},newPhoneInput:function(e){var t=e.detail.value;""!=t?(this.newPhone=t,this.markCode=!0):this.markCode=!1},conformPhone:function(){var t="uPhone",n=this.newPhone,o="手机号修改成功";this.updateUser(t,n,o),this.queryUsreInfo(),e.redirectTo({url:"../userInfor?u_Phone="+this.newPhone})},checkPwd:function(t){t==this.infor||e.showToast({title:"旧密码输入错误,请重新输入",duration:2e3})},oldPwdChange:function(e){this.oldPwd=e.detail.value},newPwdChange:function(e){this.checkPwd(this.oldPwd),this.newPwd=e.detail.value},conformPwdChange:function(e){this.conformPwd=e.detail.value,""!=e.detail.value?this.passwordCheck=!0:this.passwordCheck=!1},checkPwds:function(e,t){return e==t},conformPwds:function(){var t="uPassword",n=this.newPwd,o="密码修改成功";this.checkPwds(this.newPwd,this.conformPwd)?(this.updateUser(t,n,o),this.queryUsreInfo()):e.showToast({title:"两次密码输入不一致，请重新输入",duration:2e3})},updateUser:function(t,n,r){var a=this,s={openId:e.getStorageSync("openid"),inforType:t,inforMation:n};i.default.post(o.WechatUserUpdate,s).then((function(t){e.showToast({title:r,duration:2e3}),a.queryUsreInfo()})).catch((function(e){console.log(e)}))},queryUsreInfo:function(){var t="MP-WEIXIN";console.log(e.getStorageSync("openid"));var n={openid:e.getStorageSync("openid"),uEnvirn:t};i.default.post(o.WechatUserQuery,n).then((function(t){e.removeStorageSync("WeChatUserInfo"),e.setStorageSync("WeChatUserInfo",t),e.redirectTo({url:"../userInfor"})})).catch((function(e){}))}}};t.default=s}).call(this,n("543d")["default"])},"757b":function(e,t,n){"use strict";n.r(t);var o=n("cabc"),i=n("9f1e");for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n("2fa7");var a,s=n("f0c5"),u=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],a);t["default"]=u.exports},"9f1e":function(e,t,n){"use strict";n.r(t);var o=n("66bf"),i=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},cabc:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o}));var i=function(){var e=this,t=e.$createElement;e._self._c},r=[]}},[["08e6","common/runtime","common/vendor"]]]);